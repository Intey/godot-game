# Troops AI

Первый AI который хочется создать, что добавит больше реализма.

Начнем с простого, чтобы каждый отдельный NPC знал в каком отряде он находится и
является ли целевой Pawn частью отряда.

Затем, возможность для игрока организовать отряд или пригласить ближайших NPC в
отряд. 

Сформированный отряд должен передвигаться группой, поэтому все NPC в группе
должны двигаться друг к другу, на определенном расстоянии. Для этого, будем
считать, что при формировании отряда, игрок автоматически назначается на роль
ведущего.

> Specials
> Просто: 1 ведущий, все следуют за ведущим.
> Сложнее: несколько ведущих, ведомые разделяются по ним.

Вопросы к подходу:

- Как комбинировать состояния. Бой, не бой, преследование, поиск, удержание
  позиции - это разные стратегии, т.е. это 1 FSM. А если мы суда добавляем
  механику групп, то это поведение нужно как-то скорректировать. Боюсь тут мы
  можем рассчитывать только на дублирование логики, иначе будет сильно дорогое и
  сложное API хуков. Другой вопрос - появятся ли другие системы, которые будут
  влиять на теже компоненты? В этом случае, мы должны четко знать порядок
  применения систем, и то как они применяются: заменяют значение,
  добавляют/удаляют.

## TroopAI напрямую меняет позицию у Pawn

Просто чтобы стартануть.
TroopAI знает слишком много про то, где он находится. Изменения в составе
усложняются.

## Pawn просматривает все компоненты и собирает с них изменения

## Системы, которые управляют всем процессом


# Combat AI

Предусловия:

1. Враг в поле зрения

Модификаторы:

- many-e: вграгов много
- troop: мы в группе

Как ведется бой:

1. if many-e - бежим
2. if troop: стреляем в ближайшего врага


# ECS 

Inheritance 

```plantuml
Animal -|> Alive
Pawn -|> Alive
Neutral -|> Pawn
Solder -|> Pawn

```

ECS

```
C:Health
C:Damage -<> Rifle,Knife,Self
C:Defence

Animal -<> Health,Damage

Pawn -<> Health,Damage

Solder -|> Pawn
Solder -<> Defence
Neutral -<> Health

```
