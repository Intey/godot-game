# GDD

# Описание игры

Игра посвящена тематике войны времен второй мировой войны. В этой войне 2
фракции: наши и враги. В нашу фракцию входит большое количество солдат, в том
числе и партизан, мирных жителей. Наше внимание сконцентрировано на партизанах,
а обычные солдаты являются основной боевой силой, которой мы помогаем.

Наша задача - продвижение нашей фракции к победе. Для победы, мы должны
заставить врагов капитулировать и принять поражение.

Игрок управляет персонажем, который является обычным партизаном, без каких-то
особенностей. Смерть "героя" ничем ни премечательна и приводит просто к передаче
управления над другим, аналогичным юнитом.

Вместо сюжета используется AI и основная задача - победить оппонентов. AI в этом
случае преследует глобальную цель, разделен на иерархию управления, которая
ставит цели тем точнее, чем ближе к персонажам. AI формирует квесты, что создает
низкоуровневые элементы сюжета. Более высокоуровневые элементы - видеовставки -
формируются из решений, принимаемых наверху иерархии AI, там где генералы.

Чтобы справляться со сложными задачами, часто необходимо объединяться в отряды,
чем пользуются и сами NPC. Часто, организация отряда - это приказ командира с
последующим назначением на задачу.


# Базовые механики


Игра фокусирует на ходьбе и стрельбе с отрядом. NPC отряда в большинстве своем
сами определяют куда им двигаться и что делать, до тех пор, пока мы не станем
командующим или лидером отряда, что позволит командовать членами отряда.

## Стрельба и перемещение

Стрельба ведется на расстоянии. При выстреле, есть шанс фатальности, т.е.
уничтожение персонажа при попадании. Это симулирует вертикальную точность и
попадание в критичные части тела.
Укрытия уменьшают процент фатальности урона.

## Характеристики персонажей

* Здоровье - ранения уменьшают здоровье. Не вылеченные ранения будут постепенно
  уменьшать здоровье в плоть до фаталити. Аптечка останавливает прогресс
  заболевания от ранений, для полного восстановления необходим сон

* Сонливость - игрок должен спать. Это влияет на восприятие приказов (текст
  может искажаться), точность, выносливость
* Меткость - как меток персонаж. При максимальном значении все выстрелы
  фатальны
* Выносливость - запас "маны" для бега, переноса предметов и так далее
* Голод - влияет на запас выносливости
* Жажда - аналогично голоду, но влияет на скорость восстановления выносливости

## Строительство

Стоительство в игре занимает второстепенную, но вспомогательную роль.
Окопы - позволяют получить укрытие там, где природных нет.
Лагеря предоставляют необходимые для жизни вещи: укрытия от дождя и для сна,
костры для приготовления пищи.

## Live Environment
- НПС - невосполняемый ресурс ограниченного количества
- Изначально, ресурсы имеют распределение по карте
- Смерть игрока приводит к передаче управления игроку над ближайшим NPC низкого
	ранга
- Для существования, НПС нужны примитивные ресурсы: еда, вода. Так же
  второстепенные потребности: тепло(одежда, кров), туалет
- Отсутствие примитивов ведет к вымеранию НПС
- командиры - определяют какие задачи будут выполняться
- Задача командира - выполнить задачу минимальными потерями имея ресурс в виде
	примитивов, NPC
- командиры могут делегировать часть ресурсов под управление другого командира
- командир формирует задания по добыче примитивов для поддержания жизни НПС
- командир имеет свои характеристики, которые влиют на принимаемые им решения


## Персонажи

Солдаты и партизаны - основные персонажи в игре. Их роль выполнение задач,
ведение боя. Солдат отличается от партизана аммуницией и тактикой. Тактически,
солдаты более опасны в бою чем партизаны, но не умеют стоить, крафтить, т.е. их
навыки выживания низкие. Партизан наоборот: менее успешен в бою, но хорошо
приспособлен к выживанию.

Стратегией войны управляют генералы и командиры, которые формируют задания вниз
по иерархии чинов, на дне которой - наш "герой". Генералы и командиры оперируют
квестами, т.е. дают задания. Солдаты же их исполняют.

Мирные жители являются дополнительными и встречаются только в поселках. Вести
бой не умеют, выживают плохо, но знают как вести хозяйство в деревне, как
производить еду, управлять скотом.

Животные наполняют мир и в основном являются источником пищи для людей, но так
же могут быть опасны и нападать на одиночных солдат или небольшие группы.

# HUD

Игрок видит состояние своего персонажа: здоровье, патроны (если есть огнестрел),
сонливость, голод.
Дополнительно, видно состояние каждого члена отряда, если мы состоим в отряде.

Есть ситуативный UI который отображается для коммуникации с членами отряда.
Такой UI позволяет сообщать о ситуации на поле боя саратникам или просить
помощи. если игрок - лидер отряда, то UI позволяет отдавать приказы.



# AI

Сержанты должны анализировать ситуацию на поле боя и формировать задачи для
создания более удачных условий для атаки.

Сержант должен уметь:

* собирать информацию о противнике
* "прятать" свои силы и вводить в заблуждение врага

Солдаты должны уметь:

* атаковать
* выбирать более удачную позицию для боя, где попасть по ним труднее

## Стратегии сержанта

### Рискующий

> Пускай враг нас боится

Рискующий всегда отравляет на **разведку боем**. Когда разведка возвращается и
сообщает о наличии противника, то если силы противника обнаружены - посылает
**все силы**, с небольшим перекрытием. Т.е. на **10 человек**, **пошлет 11-12**.
Посылает на разведку **более половины** отряда.

Не занимается сокрытием положения лагеря.
В случае нападения, отдает команду **боя до конца**. Партизаны больше рискуют.

### Аккуратный

> Одно поражение стоит 1000 побед

**Скрытая разведка**.

Скрывает лагерь, выставляет посты по периметру, для упреждающих уведомлений.

Постовые **скрытны**, в случае обнаружения врага - возвращаются с докладом.
На разведку отправляет **треть** отряда.

Бой ведет с нескольких сторон, продолжает отправлять по сторонам разведчиков,
если ситуация не критична



## Командир: Управление ресурсами

Для принятия решений, командиру нужна информация. Первая задача, которую ставит
командир - поиск информации. командир задает отрядам задачи проведения разведки
в заданных им областях. командир оперирует предположениями для формирования
задач разведки, и в силу недостатка информации, может ставить задачи не совсем
определенные: "найдите где-нибудь на севере что-нибудь полезное". Это оставляет
свободу ИИ НПС для выполнения задачи.

Предположения могут подтверждаться или опровергаться. В результате выполнения
разведки, полученная информация используется командиром для формирования более
сложных задач:
- Договориться с деревней о поставках еды
- Найти новых саратников
- ???

Постепенно у командира выстраивается карта обеспечения кампании. В дальнейшем,
по этой карте командир строит задания.
# Вопросы и размышления

## Question: how handle collecting info with live env?
Как передавать изменяемую информацию? Игрок может пройти по разным путям, а
следовательно получать разную информацию в одних и тех же местах.
Пример:
1. На юге есть железная дорога. В одной итерации, командир дает задачу
   разведать север. События развиваются на севере, кампания попадает на фронт.
   На юге в этот момент проходят поезда врагов, дополняя их ресурсами. Позднее
   командир дает задачу исследовать юг, обнаруживается проходящий поезд. Затем
   отправляется операция по диверсии поезда, но в это время лагерь
   уничтожается, кампания проиграна.
2. Во второй раз игрок игнорирует приказ поиска на севере и находит на юге ж/д,
   и сообщает о поездах. командир меняет план на атаку юга, что приводит к
   победе.

### Варианты
- определение конечного множества возможных событий для конечного множества
  интерактивных областей (деревни, ж/д пути, фронтовые окопы, и т.п.)

## Question: how to determine effective action?
Как командир должен по полученной информации создавать новые задачи?

### Варианты
- Имея конечное множество событий, можно построить дерево реагирования

Можно ли не расматривать все варианты?

- Использование ML. Генерация датасетов на командирах со случайной логикой,
  поиск паттернов (цепочек событий) ведущих к поражению, рассмотрение различных
  моделей.

Что делать с неполной информацией? Модели в большинстве случаев рассматривают
одинаковый набор параметров, а в нам случае он все время пополняется и с каждым
новым событием у нас больше информации.

## Possible history: Wolfs assault on camp
- Игрок создает лагерь где-то неподалеку от стаи волков
- Стая волков когда голодна выходит на охоту
- Если стая находит лагерь, происходит оценка сил и шанс победы. Если шанс
  велик - происходит атака
- Если НПС лагеря замечает волков - начинает шум
- Игрок может так же поднять шум
- Другие НПС реагируют на шум и ищут врага. Когда находят атакуют

## Possible history: raid
- НПС врага могут осуществляют поиск партизанских лагерей в разных секторах
- если НПС врага выбирают для поиска серктор с лагерем, то далее повторяется
  история аналогичная истории с волками

## Missions: ending, timing
- Миссии имеют тайминг - время, в которое есть смысл их выполнять
- Миссии должны генерироваться из данных об окружающем мире
- Результат выполнения или невыполнения миссии изменяет окружение, что приводит
  к изменению последующих миссий (их наличие, тип)
